import{_ as t,c as e,a2 as i,o as r}from"./chunks/framework.CehHI-68.js";const m=JSON.parse('{"title":"从旧版本的数据库导入","description":"","frontmatter":{},"headers":[],"relativePath":"guide/import.md","filePath":"zh/guide/import.md","lastUpdated":1757128899000}'),s={name:"guide/import.md"};function l(o,a,n,d,h,p){return r(),e("div",null,a[0]||(a[0]=[i('<h1 id="import" tabindex="-1">从旧版本的数据库导入 <a class="header-anchor" href="#import" aria-label="Permalink to &quot;从旧版本的数据库导入 {#import}&quot;">​</a></h1><p>如果您现在正在使用兰空图床付费版本(1.7.x)，可以根据此章节将您的旧版本数据迁移至 2.x 版本中。</p><p>由于旧版本与新版本存在非常大的差异，旧版本无法直接通过在线或离线更新的方式升级到最新版本，但是我们在 2.x 版本中内置了迁移脚本。尽管如此，还是有部分数据无法完整无缝的迁移到新版本中，需要手动处理。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>迁移脚本仅迁移数据库，如果您使用了本地的储存，则需要手动将文件移动到新站点中的指定文件夹中。</p></div><h2 id="can-be-migrate-data" tabindex="-1">可以迁移的数据 <a class="header-anchor" href="#can-be-migrate-data" aria-label="Permalink to &quot;可以迁移的数据 {#can-be-migrate-data}&quot;">​</a></h2><p>系统设置、SMTP 配置、支付驱动、社会化登录驱动、角色组、储存策略、组与储存策略关联、用户、系统套餐、工单、图片、相册、分享、订单、公告、举报、违规记录、页面、意见与反馈、第三方授权。</p><h2 id="unable-to-migrate-data" tabindex="-1">无法迁移的数据 <a class="header-anchor" href="#unable-to-migrate-data" aria-label="Permalink to &quot;无法迁移的数据 {#unable-to-migrate-data}&quot;">​</a></h2><p>优惠券、点赞记录、订单部分信息、页面内容、套餐内的赠送容量以及组设置。</p><h2 id="needs-to-be-adjusted" tabindex="-1">需要调整的数据 <a class="header-anchor" href="#needs-to-be-adjusted" aria-label="Permalink to &quot;需要调整的数据 {#needs-to-be-adjusted}&quot;">​</a></h2><ul><li>套餐需要重新设置赠送容量和角色组</li><li>页面内容需要补充</li><li>审核驱动配置需要补充</li></ul><h2 id="how-to-migrate" tabindex="-1">如何迁移 <a class="header-anchor" href="#how-to-migrate" aria-label="Permalink to &quot;如何迁移 {#how-to-migrate}&quot;">​</a></h2><h3 id="install-v2" tabindex="-1">安装 2.x 版本 <a class="header-anchor" href="#install-v2" aria-label="Permalink to &quot;安装 2.x 版本 {#install-v2}&quot;">​</a></h3><p>您必须要创建一个新站点安装 2.x 版本，请参考<a href="./install">安装</a>章节。</p><h3 id="start-migration" tabindex="-1">执行迁移 <a class="header-anchor" href="#start-migration" aria-label="Permalink to &quot;执行迁移 {#start-migration}&quot;">​</a></h3><p>登录服务器 SSH 终端，进入新站点的根目录，执行导入数据命令：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app:import</span></span></code></pre></div><p>然后根据提示内容，输入旧版本的数据库连接地址等配置信息，2.x 版本程序会连接旧版本数据库，将数据导入到新版本数据库中，迁移过程中旧站点不受影响，可以正常运行。</p><p>迁移完毕后即可使用旧版本中的管理员账号，登录新站点的后台。</p>',18)]))}const u=t(s,[["render",l]]);export{m as __pageData,u as default};
