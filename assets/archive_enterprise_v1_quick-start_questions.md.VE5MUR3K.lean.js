import{_ as e,c as s,a2 as t,o as r}from"./chunks/framework.CehHI-68.js";const u=JSON.parse('{"title":"常见问题","description":"常见的问题以及解决方法","frontmatter":{"title":"常见问题","description":"常见的问题以及解决方法"},"headers":[],"relativePath":"archive/enterprise/v1/quick-start/questions.md","filePath":"zh/archive/enterprise/v1/quick-start/questions.md","lastUpdated":1731937690000}'),o={name:"archive/enterprise/v1/quick-start/questions.md"};function n(i,a,l,p,d,c){return r(),s("div",null,a[0]||(a[0]=[t(`<h2 id="安装时出现错误-sqlstate-42000-syntax-error-or-access-violation-1064-you-have-an-error" tabindex="-1">安装时出现错误，SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error... <a class="header-anchor" href="#安装时出现错误-sqlstate-42000-syntax-error-or-access-violation-1064-you-have-an-error" aria-label="Permalink to &quot;安装时出现错误，SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error...&quot;">​</a></h2><p>不支持的数据库版本，请参阅 <a href="/docs/enterprise/v1/#支持的数据库">支持的数据库</a> 章节</p><h2 id="为什么配置完了以后-访问站点显示-404" tabindex="-1">为什么配置完了以后，访问站点显示 404？ <a class="header-anchor" href="#为什么配置完了以后-访问站点显示-404" aria-label="Permalink to &quot;为什么配置完了以后，访问站点显示 404？&quot;">​</a></h2><p>请检查伪静态、站点运行目录是否设置正确，如果确认正确请尝试重启。</p><h2 id="为什么不支持-svg-格式的图片" tabindex="-1">为什么不支持 svg 格式的图片？ <a class="header-anchor" href="#为什么不支持-svg-格式的图片" aria-label="Permalink to &quot;为什么不支持 svg 格式的图片？&quot;">​</a></h2><p>严格来说，svg 不是图片，是通过 xml 标记语言实现的矢量图形，也就是说 svg 不支持加水印、生成缩略图、获取宽高能一系列操作，这破坏了系统中很多业务流程。</p><h2 id="能不能上传图片以外格式的文件-例如-mp4" tabindex="-1">能不能上传图片以外格式的文件，例如 mp4？ <a class="header-anchor" href="#能不能上传图片以外格式的文件-例如-mp4" aria-label="Permalink to &quot;能不能上传图片以外格式的文件，例如 mp4？&quot;">​</a></h2><p>不可以，程序定位就是管理图片，未做任何图片以外格式的文件支持。</p><h2 id="为什么不支持客户端直传" tabindex="-1">为什么不支持客户端直传 <a class="header-anchor" href="#为什么不支持客户端直传" aria-label="Permalink to &quot;为什么不支持客户端直传&quot;">​</a></h2><p>其一，由于第三方储存的多样性，有些第三方储存通过客户端直传后程序拿不到需要的数据，其二，太麻烦了。</p><h2 id="我多次上传了相同的照片-图片管理中也出现了图片-这是-bug-还是-feature" tabindex="-1">我多次上传了相同的照片，图片管理中也出现了图片，这是 bug 还是 feature? <a class="header-anchor" href="#我多次上传了相同的照片-图片管理中也出现了图片-这是-bug-还是-feature" aria-label="Permalink to &quot;我多次上传了相同的照片，图片管理中也出现了图片，这是 bug 还是 feature?&quot;">​</a></h2><p>是 feature，在同一个储存策略下，上传相同的图片，程序不会重复的写入文件，但会创建文件记录，多条记录指向同一个物理文件。</p><h2 id="我的图片中-「复制图片」出错-显示-复制失败-clipboarditem-is-not-defined" tabindex="-1">我的图片中，「复制图片」出错，显示 复制失败, ClipboardItem is not defined <a class="header-anchor" href="#我的图片中-「复制图片」出错-显示-复制失败-clipboarditem-is-not-defined" aria-label="Permalink to &quot;我的图片中，「复制图片」出错，显示 复制失败, ClipboardItem is not defined&quot;">​</a></h2><p>这与浏览器限制有关，站点必须以 https 的方式访问。了解更多 <a href="https://w3c.github.io/clipboard-apis/#dom-navigator-clipboard" target="_blank" rel="noreferrer">https://w3c.github.io/clipboard-apis/#dom-navigator-clipboard</a></p><h2 id="原图保护功能是什么" tabindex="-1">原图保护功能是什么？ <a class="header-anchor" href="#原图保护功能是什么" aria-label="Permalink to &quot;原图保护功能是什么？&quot;">​</a></h2><p>原图保护功能指的是开启后，上传后图片返回的 url 中不是图片的真实路径，而是一串随机字符串。开启后将会消耗更多的内存。</p><h2 id="开启原图保护功能后访问图片-404" tabindex="-1">开启原图保护功能后访问图片 404 <a class="header-anchor" href="#开启原图保护功能后访问图片-404" aria-label="Permalink to &quot;开启原图保护功能后访问图片 404&quot;">​</a></h2><p>这种情况是因为运行环境接管图片资源导致的，请更改 nginx 或 apache 的配置，例如 nginx：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    expires      30d;</span></span>
<span class="line"><span>    error_log /dev/null;</span></span>
<span class="line"><span>    access_log /dev/null;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ...</span></span></code></pre></div><p>将这段代码注释掉即可。</p><h2 id="更新后出现样式异常、按钮不起作用" tabindex="-1">更新后出现样式异常、按钮不起作用？ <a class="header-anchor" href="#更新后出现样式异常、按钮不起作用" aria-label="Permalink to &quot;更新后出现样式异常、按钮不起作用？&quot;">​</a></h2><p>如果你使用了 cdn，请检查是否未刷新 cdn 的缓存。</p><h2 id="上传出现失败-请稍后重试" tabindex="-1">上传出现失败，请稍后重试？ <a class="header-anchor" href="#上传出现失败-请稍后重试" aria-label="Permalink to &quot;上传出现失败，请稍后重试？&quot;">​</a></h2><p>上传失败有很多原因，比如配置错误、文件较大返回 423 Request Entity Too Large、生成缩略图时图片较大导致超时被强行断开连接等等，出现错误通常情况下可以在<code>storage/logs</code>文件夹下找到错误日志，如果没有则表示错误并不是发生在程序中，而是外在原因。</p><h2 id="使用反向代理并且域名使用了-https-的情况下-程序请求静态资源、生成的链接却是-http" tabindex="-1">使用反向代理并且域名使用了 https 的情况下，程序请求静态资源、生成的链接却是 http ？ <a class="header-anchor" href="#使用反向代理并且域名使用了-https-的情况下-程序请求静态资源、生成的链接却是-http" aria-label="Permalink to &quot;使用反向代理并且域名使用了 https 的情况下，程序请求静态资源、生成的链接却是 http ？&quot;">​</a></h2><p>这种情况通常是因为你的程序正在从 80 端口进行转发流量，详细解释和解决方法：<a href="https://laravel.com/docs/9.x/requests#configuring-trusted-proxies" target="_blank" rel="noreferrer">https://laravel.com/docs/9.x/requests#configuring-trusted-proxies</a> 请尝试增加反向代理配置：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>proxy_set_header X-Forwarded-Proto $scheme;</span></span></code></pre></div><h2 id="能不能支持-xxxx-、xxxx-储存" tabindex="-1">能不能支持 xxxx 、xxxx 储存？ <a class="header-anchor" href="#能不能支持-xxxx-、xxxx-储存" aria-label="Permalink to &quot;能不能支持 xxxx 、xxxx 储存？&quot;">​</a></h2><p>市面上各种厂家的产品层出不穷，兰空图床只会对主流的、具备相应接口的产品作适配，兰空图床的储存是由 <a href="https://flysystem.thephpleague.com/" target="_blank" rel="noreferrer">flysystem</a> 实现，欢迎你提交 PR！</p><h2 id="缩略图文件夹可以改名字吗" tabindex="-1">缩略图文件夹可以改名字吗？ <a class="header-anchor" href="#缩略图文件夹可以改名字吗" aria-label="Permalink to &quot;缩略图文件夹可以改名字吗？&quot;">​</a></h2><p>可以，编辑 <code>.env</code> 文件，增加一项配置：<br><code>THUMBNAIL_PATH=your folder</code><br> 然后删除 <code>public</code> 目录下的缩略图符号连接，然后执行 <code>php artisan lsky:symlinks</code> 但是请注意，此操作影响所以图片的缩略图地址，包括已上传的图片。</p><h2 id="可以关闭缩略图功能吗" tabindex="-1">可以关闭缩略图功能吗？ <a class="header-anchor" href="#可以关闭缩略图功能吗" aria-label="Permalink to &quot;可以关闭缩略图功能吗？&quot;">​</a></h2><p>可以，编辑 <code>.env</code> 文件，增加一项配置： <code>ENABLE_THUMBNAIL=false</code></p><h2 id="缩略图文件夹、文件被我删掉了怎么办" tabindex="-1">缩略图文件夹、文件被我删掉了怎么办？ <a class="header-anchor" href="#缩略图文件夹、文件被我删掉了怎么办" aria-label="Permalink to &quot;缩略图文件夹、文件被我删掉了怎么办？&quot;">​</a></h2><p>你可以通过执行命令 <code>php artisan lsky:thumbnails</code> 来重新生成所有图片的缩略图，但是注意，这个操作等待时间可能会比较漫长，取决于图片数量。</p><h2 id="如何增加统计代码" tabindex="-1">如何增加统计代码？ <a class="header-anchor" href="#如何增加统计代码" aria-label="Permalink to &quot;如何增加统计代码？&quot;">​</a></h2><p>在 <code>public/js</code> 目录下新建 <code>custom.js</code> 文件，程序会自动加载该 js 文件，如果单个js文件不满足需求，还可以在 <code>resources/views/layouts</code> 目录新建 <code>custom.blade.php</code> 文件，在里面可以添加任何代码。</p><h2 id="如何修改-redis-库" tabindex="-1">如何修改 Redis 库？ <a class="header-anchor" href="#如何修改-redis-库" aria-label="Permalink to &quot;如何修改 Redis 库？&quot;">​</a></h2><p>你可以通过在 <code>.env</code> 文件中增加配置 <code>REDIS_DB=0</code> 和 <code>REDIS_CACHE_DB=1</code> 来指定库。</p>`,39)]))}const b=e(o,[["render",n]]);export{u as __pageData,b as default};
