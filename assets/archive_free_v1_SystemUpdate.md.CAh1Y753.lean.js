import{_ as o,c,a2 as d,o as t}from"./chunks/framework.CehHI-68.js";const u=JSON.parse('{"title":"系统升级","description":"","frontmatter":{"title":"系统升级"},"headers":[],"relativePath":"archive/free/v1/SystemUpdate.md","filePath":"zh/archive/free/v1/SystemUpdate.md","lastUpdated":1734677202000}'),p={name:"archive/free/v1/SystemUpdate.md"};function i(a,e,l,r,s,n){return t(),c("div",null,e[0]||(e[0]=[d("<blockquote><p>1.6.0 版本开始, 支持在线升级功能, 1.6.0 以前的版本升级指导请参考该版本根目录下的 README.md 文件.</p></blockquote><p>新版本使用在线升级的方式更新系统, 为了保证跨版本升级的兼容, 每次更新都需要下载完整的安装包.</p><p>由于 WEB 服务器环境限制, 脚本执行长时间的任务, 浏览器等待服务器返回数据的时间过长可能会遭到运行环境(Apache 和 Nginx 等)的终止, 不同的运行环境会有不同的差异, 基本都是在 30 秒.</p><p>兰空图床更新时会将 <code>PHP</code> 的脚本最大执行时间改为 <code>0</code>, 即永不超时, 但是同样可能会遭到环境的强制终止.</p><p>如果在检测更新时出现 <code>更新服务器异常, 请稍后重试!</code>，说明你的服务器无法访问到更新服务器。请尝试离线覆盖安装。方法如下：</p><ol><li>备份原系统</li><li>下载新版本安装包，解压。将旧版本系统中的根目录 <code>.env</code> 文件复制到新版本的根目录 <ul><li>如果你的文件是储存在本地，你还需要将 <code>public</code> 目录中的文件移动的新版本的 <code>public</code> 目录下</li></ul></li><li>修改 .env 文件中的数据库配置，然后在 <code>application</code> 目录下新建 <code>install.lock</code> 文件</li><li>将新版本 <code>application/sql/update.sql</code> 导入到数据库，或直接复制文件内容执行</li><li>替换旧版本 (删除旧版本，粘贴新版本)</li></ol><p>如果在更新时出现 <code>更新失败, 请稍后重试</code> 的提示, 大概率是因为超时被中断, 如果出现这样的情况, 请手动通过 <code>https://github.com/0xxb/lsky-pro/releases</code> 下载 zip 格式的完整包, 并重命名为 <code>upgrade.zip</code> 移动至系统 <code>runtime</code> 目录中, 然后在执行更新, 这时候兰空图床会跳过下载安装包的步骤, 直接通过解压 <code>upgrade.zip</code> 的方式进行安装.</p><p>宝塔php7.3版本默认没有开启 <code>ZipArchive</code> ，更新时会出现错误，切换其他版本即可。</p>",8)]))}const f=o(p,[["render",i]]);export{u as __pageData,f as default};
