import{_ as a,c as l,a2 as r,o as i}from"./chunks/framework.CehHI-68.js";const b=JSON.parse('{"title":"更新日志","description":"","frontmatter":{"title":"更新日志"},"headers":[],"relativePath":"archive/free/v1/UpdateLog.md","filePath":"zh/archive/free/v1/UpdateLog.md","lastUpdated":1731937013000}'),t={name:"archive/free/v1/UpdateLog.md"};function s(o,e,h,d,n,u){return i(),l("div",null,e[0]||(e[0]=[r('<blockquote><p>手册上的更新日志从 1.5.2 版本开始记录。更多旧版本日志请参阅仓库的 releases</p></blockquote><h2 id="_1-6-4-2021-12-20" tabindex="-1">1.6.4 (2021-12-20) <a class="header-anchor" href="#_1-6-4-2021-12-20" aria-label="Permalink to &quot;1.6.4 (2021-12-20)&quot;">​</a></h2><h3 id="added" tabindex="-1">Added <a class="header-anchor" href="#added" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>一键复制全部链接 (<a href="https://github.com/lsky-org/lsky-pro/issues/167" target="_blank" rel="noreferrer">#167</a>)</li></ul><h3 id="changed" tabindex="-1">Changed <a class="header-anchor" href="#changed" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>将所有静态资源放置本地</li><li>接口增加刷新 token 属性</li><li>个人中心、后台显示用户注册时间 (<a href="https://github.com/lsky-org/lsky-pro/issues/263" target="_blank" rel="noreferrer">#263</a>)</li></ul><h3 id="faq" tabindex="-1">FAQ: <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ:&quot;">​</a></h3><ul><li>为了保证可用性，此次更新主要是为了静态文件放置本地，不再使用第三方静态资源托管服务。</li><li>如没有特殊情况，这次更新为 1.x 版本最后一个小版本。最新版本动态请戳我</li></ul><h2 id="v1-6-3" tabindex="-1">V1.6.3 <a class="header-anchor" href="#v1-6-3" aria-label="Permalink to &quot;V1.6.3&quot;">​</a></h2><h3 id="added-1" tabindex="-1">Added <a class="header-anchor" href="#added-1" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>画廊(图片广场)功能</li><li>自动添加水印功能 (<a href="https://github.com/lsky-org/lsky-pro/issues/196" target="_blank" rel="noreferrer">#196</a>, <a href="https://github.com/lsky-org/lsky-pro/issues/186" target="_blank" rel="noreferrer">#186</a>, <a href="https://github.com/lsky-org/lsky-pro/issues/138" target="_blank" rel="noreferrer">#138</a>, <a href="https://github.com/lsky-org/lsky-pro/issues/85" target="_blank" rel="noreferrer">#85</a>, <a href="https://github.com/lsky-org/lsky-pro/issues/75" target="_blank" rel="noreferrer">#75</a>)</li><li>PHP8 支持 (<a href="https://github.com/lsky-org/lsky-pro/issues/192" target="_blank" rel="noreferrer">#192</a>)</li></ul><h3 id="changed-1" tabindex="-1">Changed <a class="header-anchor" href="#changed-1" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>原始文件名称命名规则支持于其他规则组合使用</li><li>上传接口返回 ID 字段 (<a href="https://github.com/lsky-org/lsky-pro/issues/180" target="_blank" rel="noreferrer">#180</a>)</li><li>个人中心显示 Token (<a href="https://github.com/lsky-org/lsky-pro/issues/157" target="_blank" rel="noreferrer">#157</a>)</li></ul><h3 id="fixed" tabindex="-1">Fixed <a class="header-anchor" href="#fixed" aria-label="Permalink to &quot;Fixed&quot;">​</a></h3><ul><li>修复 md5 相同但图片内容不同会跳过上传的 bug (<a href="https://github.com/lsky-org/lsky-pro/issues/156" target="_blank" rel="noreferrer">#156</a>)</li><li>修复后台控制台统计不正确的 bug</li><li>修复文件路径命名规则为空时，上传后的链接不正确的 bug (<a href="https://github.com/lsky-org/lsky-pro/issues/159" target="_blank" rel="noreferrer">#159</a>)</li><li>修复 ftp 功能端口设置无效问题</li><li>修复粘贴图片上传时，图片名称不会改变的 bug (<a href="https://github.com/lsky-org/lsky-pro/issues/194" target="_blank" rel="noreferrer">#194</a>)</li><li>修复后台获取 IP 接口失效的 bug (<a href="https://github.com/lsky-org/lsky-pro/issues/179" target="_blank" rel="noreferrer">#179</a>)</li></ul><h2 id="_1-6-1" tabindex="-1">1.6.1 <a class="header-anchor" href="#_1-6-1" aria-label="Permalink to &quot;1.6.1&quot;">​</a></h2><h3 id="added-2" tabindex="-1">Added <a class="header-anchor" href="#added-2" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>增加八位数随机字符串命名规则 <a href="https://github.com/lsky-org/lsky-pro/issues/121" target="_blank" rel="noreferrer">#121</a></li></ul><h3 id="changed-2" tabindex="-1">Changed <a class="header-anchor" href="#changed-2" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>更改后台图片管理每页显示数量为 20 条</li><li>改进用户注册验证条件</li><li>取消 coding 托管安装包仓库</li><li>更新部分拓展包</li></ul><h3 id="fixes" tabindex="-1">Fixes <a class="header-anchor" href="#fixes" aria-label="Permalink to &quot;Fixes&quot;">​</a></h3><ul><li>修复后台图片列表切换 select 后点击下一页数据被重置的 bug <a href="https://github.com/lsky-org/lsky-pro/issues/128" target="_blank" rel="noreferrer">#128</a></li><li>修复用户图片列表中图片分页后无法搜索到指定图片的 bug <a href="https://github.com/lsky-org/lsky-pro/issues/99" target="_blank" rel="noreferrer">#99</a></li><li>修复自定义链接参数后上传返回的链接中出现重复参数的 bug <a href="https://github.com/lsky-org/lsky-pro/issues/118" target="_blank" rel="noreferrer">#118</a></li><li>修复数据库密码带有符号会导致500错误的bug <a href="https://github.com/lsky-org/lsky-pro/issues/112" target="_blank" rel="noreferrer">#112</a></li></ul><h2 id="_1-6-0" tabindex="-1">1.6.0 <a class="header-anchor" href="#_1-6-0" aria-label="Permalink to &quot;1.6.0&quot;">​</a></h2><h3 id="added-3" tabindex="-1">Added <a class="header-anchor" href="#added-3" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>增加 OTA 在线升级功能</li><li>增加 dark(暗黑)模式</li><li>增加 FTP 被动模式开关</li><li>增加 IP 封禁功能(支持通配符)</li><li>增加图片自定义额外参数功能</li><li>增加单用户站点模式</li></ul><h3 id="changed-3" tabindex="-1">Changed <a class="header-anchor" href="#changed-3" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>改进安装逻辑, 去除 mysqli 限制, 改为 PDO 连接方式</li><li>重构鉴权方式、接口认证方式</li><li>重构更新数据库结构的方法</li><li>安装条件增加需要 ZipArchive 支持</li><li>图片最大上传限制兼容 KB 单位 <a href="https://github.com/lsky-org/lsky-pro/issues/91" target="_blank" rel="noreferrer">#91</a></li><li>删除本地静态资源, 使用第三方 CDN(jsdelivr)</li><li>改进控制台样式</li><li>恢复上传后出现的清除按钮</li><li>改进 token 生成方式</li><li>改进角色组、列表等多选操作方式</li></ul><h3 id="fixes-1" tabindex="-1">Fixes <a class="header-anchor" href="#fixes-1" aria-label="Permalink to &quot;Fixes&quot;">​</a></h3><ul><li>修复移动图片到根目录会提示不存在文件夹的 bug</li></ul><h2 id="_1-6-0-1" tabindex="-1">1.6.0 <a class="header-anchor" href="#_1-6-0-1" aria-label="Permalink to &quot;1.6.0&quot;">​</a></h2><p>⚠️ 本次更新包含一个安全质量修复，该问题可能会导致站点图片被恶意跨用户删除，建议所有人更新至此版本！</p><h3 id="fixes-2" tabindex="-1">Fixes <a class="header-anchor" href="#fixes-2" aria-label="Permalink to &quot;Fixes&quot;">​</a></h3><ul><li>修复相同 md5 的文件，删除一条记录会将文件一并删除的 bug.</li><li>修复删除没有会员的角色组会失败的 bug.</li></ul><h3 id="changed-4" tabindex="-1">Changed <a class="header-anchor" href="#changed-4" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>支持根据别名搜索图片</li></ul><h2 id="v1-5-7" tabindex="-1">V1.5.7 <a class="header-anchor" href="#v1-5-7" aria-label="Permalink to &quot;V1.5.7&quot;">​</a></h2><h3 id="fixes-3" tabindex="-1">Fixes <a class="header-anchor" href="#fixes-3" aria-label="Permalink to &quot;Fixes&quot;">​</a></h3><ul><li>修复 V1.5.6 版本中接口上传会出现错误的 bug <a href="https://github.com/lsky-org/lsky-pro/issues/83" target="_blank" rel="noreferrer">#83</a></li></ul><h2 id="v1-5-6" tabindex="-1">V1.5.6 <a class="header-anchor" href="#v1-5-6" aria-label="Permalink to &quot;V1.5.6&quot;">​</a></h2><h3 id="added-4" tabindex="-1">Added <a class="header-anchor" href="#added-4" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>新增用户名登录方式</li><li>增加文件别名功能(仅支持电脑端)</li><li>增加图片粘贴上传功能 <a href="https://github.com/lsky-org/lsky-pro/issues/69" target="_blank" rel="noreferrer">#69</a></li></ul><h3 id="changed-5" tabindex="-1">Changed <a class="header-anchor" href="#changed-5" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>更新框架和部分拓展包</li><li>上传已存在的文件直接返回图片地址，不重复创建文件 <a href="https://github.com/lsky-org/lsky-pro/issues/30" target="_blank" rel="noreferrer">#30</a></li><li>删除文件不处理储存策略删除接口返回值</li><li>改进细节样式、修复若干 bug</li></ul><h2 id="v1-5-5" tabindex="-1">V1.5.5 <a class="header-anchor" href="#v1-5-5" aria-label="Permalink to &quot;V1.5.5&quot;">​</a></h2><ul><li>更新框架和部分拓展包</li><li>修复统计数据不准确的 BUG <a href="https://github.com/lsky-org/lsky-pro/issues/57" target="_blank" rel="noreferrer">#57</a></li><li>修复高并发下上传出现名称重复的 BUG (需要PHP7.1+) <a href="https://github.com/lsky-org/lsky-pro/issues/63" target="_blank" rel="noreferrer">#63</a></li><li>增加公告功能 <a href="https://github.com/lsky-org/lsky-pro/issues/46" target="_blank" rel="noreferrer">#46</a>, <a href="https://github.com/lsky-org/lsky-pro/issues/68" target="_blank" rel="noreferrer">#68</a></li><li>增加远程储存, 暂时只支持ftp <a href="https://github.com/lsky-org/lsky-pro/issues/24" target="_blank" rel="noreferrer">#24</a></li><li>增加获取图片列表和删除图片的接口 <a href="https://github.com/lsky-org/lsky-pro/issues/40" target="_blank" rel="noreferrer">#40</a>, <a href="https://github.com/lsky-org/lsky-pro/issues/65" target="_blank" rel="noreferrer">#65</a></li><li>优化接口 token 支持从请求参数中获取, 优先从 header 里取</li><li>修复若干 bug</li></ul><p>FAQ：如果更新出现错误，请尝试手动访问 <code>http://域名/install/update.html</code> 进行更新，若还是无法更新请尝试手动导入根目录 <code>update.sql</code> 文件到数据库</p><h3 id="v1-5-4" tabindex="-1">V1.5.4 <a class="header-anchor" href="#v1-5-4" aria-label="Permalink to &quot;V1.5.4&quot;">​</a></h3><ul><li>更新thinkphp(v5.1.38)</li><li>允许接口跨域</li><li>优化接口状态码</li><li>修复程序默认的命名规则在高并发下会出现重复文件名的BUG</li><li>修复接口上传header增加token后请求失败的bug</li></ul><h2 id="v1-5-3" tabindex="-1">V1.5.3 <a class="header-anchor" href="#v1-5-3" aria-label="Permalink to &quot;V1.5.3&quot;">​</a></h2><ul><li>优化前台提示登录注册的页面</li><li>增加图片搜索支持 IP 匹配</li><li>修复若干个 Bug</li><li>首页增加鼠标悬浮链接提示对应的图片</li><li>多图上传按顺序排列</li><li>后台增加控制台</li><li>后台图片管理增加筛选访客图片选项</li><li>优化安装环境检测</li><li>鉴黄接口请求增加超时时间为30秒</li><li>更新 thinkphp 框架</li><li>更新 mdui 、bootstrap、bootstrap-input 框架</li><li>更新备案管理系统 URL 地址</li></ul><h2 id="v1-5-2" tabindex="-1">V1.5.2 <a class="header-anchor" href="#v1-5-2" aria-label="Permalink to &quot;V1.5.2&quot;">​</a></h2><ul><li>修复策略组设置无效的bug</li><li>修复接口上传时单个用户设置策略无效的bug</li><li>改进策略组编辑</li><li>修复更新后出现重复默认组的bug</li><li>默认组设置为禁止删除</li><li>增加原文件名命名规则 <a href="https://github.com/lsky-org/lsky-pro/issues/17" target="_blank" rel="noreferrer">#17</a></li><li>接口上传成功后返回更多的数据(size,mime,sha1,md5)</li><li>阻止浏览器翻译(lang=&quot;zh-CN&quot;) <a href="https://github.com/lsky-org/lsky-pro/issues/16" target="_blank" rel="noreferrer">#16</a></li><li>更换二维码接口</li><li>修复被冻结用户通过接口能上传的bug</li><li>其他细节改进</li></ul>',52)]))}const k=a(t,[["render",s]]);export{b as __pageData,k as default};
