import{_ as i,c as s,a2 as e,o as t}from"./chunks/framework.CehHI-68.js";const p="/archive/php-imagick.png",o=JSON.parse('{"title":"Imagick 拓展","description":"PHP Imagick 拓展安装教程","frontmatter":{"title":"Imagick 拓展","description":"PHP Imagick 拓展安装教程"},"headers":[],"relativePath":"archive/enterprise/v1/others/imagick.md","filePath":"zh/archive/enterprise/v1/others/imagick.md","lastUpdated":1731937690000}'),l={name:"archive/enterprise/v1/others/imagick.md"};function h(n,a,k,c,r,g){return t(),s("div",null,a[0]||(a[0]=[e(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>兰空图床使用 <a href="https://www.php.net/manual/zh/book.imagick.php" target="_blank" rel="noreferrer">Imagick 拓展</a> 对图片进行处理，它并非 PHP 预装，而是需要自己手动安装的。</p><p>imagick 分为两个部分，第一个是 <a href="http://www.imagemagick.org" target="_blank" rel="noreferrer">ImageImagick</a>，然后才是 <a href="https://www.php.net/manual/zh/book.imagick.php" target="_blank" rel="noreferrer">PHP Imagick</a>，PHP Imagick 支持哪些图片取决于 ImageImagick 库，如果您安装完程序后，发现个别拓展名(例如webp)无法上传，很有可能是因为 imagick 安装时未支持 webp，需要重新编译安装。</p></div><h2 id="编译安装-imageimagick" tabindex="-1">编译安装 ImageImagick <a class="header-anchor" href="#编译安装-imageimagick" aria-label="Permalink to &quot;编译安装 ImageImagick&quot;">​</a></h2><h3 id="下载并解压-imageimagick" tabindex="-1">下载并解压 ImageImagick <a class="header-anchor" href="#下载并解压-imageimagick" aria-label="Permalink to &quot;下载并解压 ImageImagick&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/ImageMagick/ImageMagick/archive/refs/heads/main.zip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ImageMagick.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ImageMagick.zip</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ImageMagick-main/</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>ImageImagick 支持的图片类型受系统影响，例如如果希望支持 webp，需要 <code>libwebp</code> 库的支持，且需要达到指定版本要求</li><li>使用 <code>identify -list format</code> 命令查看所有支持的图片格式</li><li>使用 <code>identify -list format | grep webp</code> 命令查看指定的图片格式是否支持</li></ul></div><h3 id="编译" tabindex="-1">编译 <a class="header-anchor" href="#编译" aria-label="Permalink to &quot;编译&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span></span></code></pre></div><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><h2 id="编译安装-php-imagick" tabindex="-1">编译安装 PHP Imagick <a class="header-anchor" href="#编译安装-php-imagick" aria-label="Permalink to &quot;编译安装 PHP Imagick&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">注意</p><p>请先使用 <code>php -v</code> 命令输出并确认当前使用的 cli php 版本，避免将拓展安装到了其他的 php 版本上。</p></div><h3 id="下载并解压-php-imagick" tabindex="-1">下载并解压 PHP Imagick <a class="header-anchor" href="#下载并解压-php-imagick" aria-label="Permalink to &quot;下载并解压 PHP Imagick&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/Imagick/imagick/archive/refs/heads/master.zip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php-imagick.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php-imagick.zip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> imagick-master/</span></span></code></pre></div><h3 id="编译并安装" tabindex="-1">编译并安装 <a class="header-anchor" href="#编译并安装" aria-label="Permalink to &quot;编译并安装&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">phpize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>安装完成后，执行命令 <code>php --ri imagick</code>，会出现下图中的信息，即为安装完成。</p><p><img src="`+p+'" alt="php-imagick"></p>',17)]))}const m=i(l,[["render",h]]);export{o as __pageData,m as default};
